if(void 0===wcpt)var wcpt={controller:{},data:{}};jQuery((function($){var controller=wcpt.controller,data=wcpt.data;function wcpt_maybe_floating_save_button(){var $save_clear=$(".wcpt-editor-save-table-clear");window.scrollY+window.innerHeight<$save_clear.offset().top?$(".wcpt-editor-save-table").addClass("wcpt-editor-save-table--floating"):$(".wcpt-editor-save-table").removeClass("wcpt-editor-save-table--floating")}controller.update_table_title=function(){var $this,new_title=$(this).val();$('.wcpt-editor-save-table [name="title"]').val(new_title)},controller.switch_editor_tabs=function(){var $this=$(this),tab=$this.attr("data-wcpt-tab"),$labels=$this.siblings(".wcpt-tab-label"),$contents=$this.siblings(".wcpt-tab-content"),$target_content=$contents.filter("[data-wcpt-tab="+tab+"]"),active_class="active";$labels.removeClass("active"),$this.addClass("active"),$contents.removeClass("active"),$target_content.addClass("active"),window.location.hash=tab},controller.toggle_sub_categories=function(){var $this;$(this).parent().toggleClass("wcpt-show-sub-categories")},controller.auto_select_on_click=function(){var node=this;if(document.body.createTextRange){const range=document.body.createTextRange();range.moveToElementText(this),range.select()}else if(window.getSelection){const selection=window.getSelection(),range=document.createRange();range.selectNodeContents(this),selection.removeAllRanges(),selection.addRange(range)}},$("body").on("wcpt_save",(function(){$('[data-wcpt-ck="saved"]').addClass("wcpt-done")})),$("body").on("change",'.wcpt-editor > [wcpt-model-key="query"]',(function(){void 0!==wcpt.data.query.category&&wcpt.data.query.category.length||wcpt.data.query.ids||wcpt.data.query.skus?$('[data-wcpt-ck="query_selected"]').addClass("wcpt-done"):$('[data-wcpt-ck="query_selected"]').removeClass("wcpt-done")})),$("body").on("change",'.wcpt-editor > [wcpt-model-key="columns"]',(function(){var column_element_created=!1;wcpt.data.columns.laptop.length&&$.each(wcpt.data.columns.laptop,(function(i_col,col){if(col.heading.content[0].elements.length)return column_element_created=!0,!1;$.each(col.cell.template,(function(i_row,row){if(row.elements.length)return column_element_created=!0,!1}))})),column_element_created?$('[data-wcpt-ck="column_element_created"]').addClass("wcpt-done"):$('[data-wcpt-ck="column_element_created"]').removeClass("wcpt-done")})),controller.save_data=function(e){e.preventDefault();var $focused_input=$("input:focus, textarea:focus");$focused_input.length&&$focused_input.attr("wcpt-model-key")&&$focused_input.trigger("change"),$("body").trigger("wcpt_save"),data.version=window.wcpt_version;var $this=$(this),post_id=$this.find("input[name='post_id']").val(),title=$this.find("input[name='title']").val(),nonce=$this.find("input[name='nonce']").val(),json_data=JSON.stringify(data),$button=$this.find(".wcpt-save"),action=$this.attr("action");$this.hasClass("wcpt-saving")||$.ajax({type:"POST",url:ajaxurl,beforeSend:function(){$this.addClass("wcpt-saving"),$button.addClass("disabled")},data:{action:action,wcpt_post_id:post_id,wcpt_title:title,wcpt_nonce:nonce,wcpt_data:json_data},success:function(data){$this.removeClass("wcpt-saving"),$button.removeClass("disabled"),"string"==typeof data&&-1!==data.indexOf("WCPT success:")?console.log(data):alert(data)}})},controller.open_dynamic_input_wrapper=function(){var $input=$(this);if(!$input.parent().hasClass("wcpt-diw")&&!$input.hasClass("wcpt-diw--disabled")){var prev_style=$input.attr("style"),style={width:$input.outerWidth()};$.each(["float","margin","top","right","bottom","left"],(function(key,prop){style[prop]=$input.css(prop)})),"absolute"==$input.css("position")&&(style.position="absolute");var $wrap=$('<div class="wcpt-diw">');$wrap.css(style),$input.wrap($wrap),$input.focus(),$("body").on("blur mousedown keydown",controller.close_dynamic_input_wrapper),$input.after('<div class="wcpt-diw-tray">');var $tray=$input.next(".wcpt-diw-tray"),$color;if(-1!==$input.attr("wcpt-model-key").indexOf("color")||"background"==$input.attr("wcpt-model-key")||"fill"==$input.attr("wcpt-model-key"))$tray.append('<input type="color">'),$tray.css({height:0}),$tray.find('input[type="color"]').spectrum({color:$input.val(),flat:!0,allowEmpty:!0,showAlpha:!0,preferredFormat:"rgba",clickoutFiresChange:!0,showInput:!1,showButtons:!1,move:function(color){$input.val(color.toRgbString()).change()}})}},controller.close_dynamic_input_wrapper=function(e){var $origin,$wrap;$(e.target).closest(".wcpt-diw").length||$(".wcpt-diw").each((function(){var $this=$(this),$input=$this.children("input");$this.replaceWith($input),$("body").off("blur mousedown keydown",controller.close_dynamic_input_wrapper),$input.change()}))},$("body").on("keydown","input[wcpt-model-key]",(function(e){if(e.key&&-1!==$.inArray(e.key,["ArrowUp","ArrowDown"])&&-1!==$.inArray($(this).attr("wcpt-model-key"),["font-size","custom_zoom_scale","line-height","letter-spacing","stroke-width","top","left","right","bottom","width","max-width","min-width","height","max-height","min-height","border-radius","border-width","border-left-width","border-right-width","border-top-width","border-bottom-width","divider-border-width","padding","padding-left","padding-right","padding-top","padding-bottom","section-padding","section-padding-left","section-padding-right","section-padding-top","section-padding-bottom","margin","margin-left","margin-right","margin-top","margin-bottom","gap","row_gap"])){e.target.value||(e.target.value="0px");var suffix=e.target.value.slice(-2),val=e.target.value;val.length>2&&isNaN(suffix)?val=val.substring(0,val.length-2):suffix="";var is_float=!((parseInt(val)+"").length===(val+"").length);"ArrowUp"==e.key?e.target.value=(10*val+(is_float?1:10))/10:"ArrowDown"==e.key&&(e.target.value=(10*val-(is_float?1:10))/10),val=e.target.value,is_float&&(parseInt(val)+"").length===(val+"").length&&(e.target.value=e.target.value+".0"),e.target.value+=suffix}})),$("body").on("click",".wcpt-tab-label",controller.switch_editor_tabs),$("body").on("blur",".wcpt-table-title",controller.update_table_title),$("body").on("click",".wcpt-toggle-sub-categories",controller.toggle_sub_categories),$("body").on("focus",'input[type="text"][wcpt-model-key], input[type="number"][wcpt-model-key]',controller.open_dynamic_input_wrapper),$("body").on("click",".wcpt-auto-select-on-click",controller.auto_select_on_click),dominator_ui.init($(".wcpt-editor, .wcpt-settings"),data),$("body").on("click",".wcpt-toggle-label",(function(){var $this,$container=$(this).closest(".wcpt-toggle-options"),toggle=$container.attr("wcpt-model-key");$container.toggleClass("wcpt-open"),toggle&&$container.parent().hasClass("wcpt-settings")&&(window.location.hash=toggle)})),$("body").on("click",".wcpt-editor-row-handle",(function(e){var $target=$(e.target),$row=$target.closest(".wcpt-editor-row");!$target.closest(".wcpt-editor-row-no-toggle").length&&$target.closest(".wcpt-editor-row-handle-data, .wcpt-editor-row-toggle").length&&$row.toggleClass("wcpt-editor-row-toggle-opened")})),$("body").on("click",".wcpt-toggle > .wcpt-toggle-trigger",(function(e){var $toggle=$(this).closest(".wcpt-toggle");$toggle.toggleClass("wcpt-toggle-on wcpt-toggle-off"),$("body").off("click.wcpt_toggle_blur"),$toggle.hasClass("wcpt-toggle-on")&&$("body").on("click.wcpt_toggle_blur",(function(e){$(e.target).closest($toggle).length||($toggle.children(".wcpt-toggle-trigger").click(),$("body").off("click.wcpt_toggle_blur"))}))})).on("click",".wcpt-toggle-x",(function(e){$(this).closest(".wcpt-toggle").toggleClass("wcpt-toggle-on wcpt-toggle-off")})),window.location.hash&&($('[data-wcpt-tab="'+window.location.hash.substr(1)+'"].wcpt-tab-label').trigger("click"),$('.wcpt-settings > [wcpt-model-key="'+window.location.hash.substr(1)+'"] > .wcpt-toggle-label').trigger("click")),$("body").on("submit",".wcpt-save-data",controller.save_data),$(window).bind("keydown",(function(e){(e.ctrlKey||e.metaKey)&&"s"===String.fromCharCode(e.which).toLowerCase()&&(e.preventDefault(),$(".wcpt-save-data").submit())})),$(".wcpt-editor, .wcpt-settings").length&&($(window).on("scroll",wcpt_maybe_floating_save_button),$("body").on("click",".wcpt-toggle-options",wcpt_maybe_floating_save_button),wcpt_maybe_floating_save_button()),$("body").on("click",".wcpt-column-links a",(function(e){e.preventDefault();var $this=$(this),$device_columns=$this.closest(".wcpt-editor-columns-container"),column_index=$this.attr("data-wcpt-index"),$target=$device_columns.children('[wcpt-model-key-index="'+column_index+'"]'),$heading,offset=$("> .wcpt-editor-light-heading",$device_columns).outerHeight()+50,$target;"add"==column_index&&(offset+=40,($target=$device_columns.find(".wcpt-button[wcpt-add-row-template]")).click());$([document.documentElement,document.body]).animate({scrollTop:$target.offset().top-offset},300,"linear")})),$("body").on("click",".wcpt-column-index",(function(){var $this;$(this).addClass("wcpt-column-index--input-on").find("input").focus().end().find(".wcpt-diw input").focus()})),$("body").on("click",".wcpt-close-column-name-input",(function(e){var $this,$input;$(this).prev("input").val("").change(),e.stopPropagation()})),$("body").on("click",".wcpt-device-columns-toggle",(function(e){var $this,$device_columns=$(this).closest(".wcpt-editor-columns-container"),$columns=$device_columns.find(".wcpt-column-settings"),$heading=$("> .wcpt-editor-light-heading",$device_columns),offset=50;$(e.target).closest(".wcpt-device-columns-toggle__expand").length?$columns.addClass("wcpt-toggle-column-expand"):$(e.target).closest(".wcpt-device-columns-toggle__contract").length&&$columns.removeClass("wcpt-toggle-column-expand"),$([document.documentElement,document.body]).animate({scrollTop:$device_columns.offset().top-50},300,"linear"),e.preventDefault()})),$("body").on("click",".wcpt-editor-row-expand, .wcpt-editor-row-contract",(function(e){var $this=$(this),$column=$this.closest(".wcpt-column-settings");$this.hasClass("wcpt-editor-row-expand")?$column.addClass("wcpt-toggle-column-expand"):$column.removeClass("wcpt-toggle-column-expand"),e.preventDefault()})),$("body").on("click",".wcpt-column-toggle-capture",(function(e){var $column;$(this).closest(".wcpt-column-settings").toggleClass("wcpt-toggle-column-expand")})),window.wcpt_duplicate_laptop_to_phone=function(){wcpt_duplicate_device("laptop","phone")},window.wcpt_duplicate_laptop_to_tablet=function(){wcpt_duplicate_device("laptop","tablet")},window.wcpt_duplicate_device=function(source,destination){source||(source="laptop"),destination||(destination="phone"),$.each(data.columns[source],(function(index,col){data.columns[destination].push(dominator_ui.refresh_ids($.extend(!0,{},col)))})),$(".wcpt-editor-save-button").click(),window.location.reload()},$("body").on("click",".wcpt-reset-global-settings",(function(e){window.confirm("Are you sure you want to reset WCPT global settings? This will not delete your tables. It will only reset the global settings for this plugin.")||e.preventDefault()})),$("body").on("click",".wcpt-activate-license, .wcpt-deactivate-license",(function(){var $this=$(this),$buttons=$this.siblings().addBack(),action="wcpt_manage_license",purpose=$this.attr("data-wcpt-purpose"),nonce=$this.attr("data-wcpt-nonce"),$container=$this.closest(".wcpt-license-container"),$status=$container.find(">.wcpt-license-key-status",$container),license_key=$container.find('[wcpt-model-key="key"]').val(),addon_slug=$container.attr("wcpt-addon-slug")?$container.attr("wcpt-addon-slug"):"",addon_item_id=$container.attr("wcpt-addon-item-id")?$container.attr("wcpt-addon-item-id"):"",$feedback=$container.find(".wcpt-license-feedback");license_key&&32==license_key.length?$.ajax({type:"POST",url:ajaxurl,beforeSend:function(){$(">span",$feedback).addClass("wcpt-hide"),$container.addClass("wcpt-verifying-license"),$buttons.prop("disabled",!0)},data:{action:action,wcpt_nonce:nonce,wcpt_purpose:purpose,wcpt_key:license_key,wcpt_addon_slug:addon_slug,wcpt_addon_item_id:addon_item_id},success:function(data){switch($container.removeClass("wcpt-verifying-license"),$buttons.prop("disabled",!1),data){case"deactivated":$feedback.find(".wcpt-response-deactivated").removeClass("wcpt-hide"),$buttons.filter('[data-wcpt-purpose="deactivate"]').prop("disabled",!0);break;case"activated":$feedback.find(".wcpt-response-activated").removeClass("wcpt-hide"),$buttons.filter('[data-wcpt-purpose="activate"]').prop("disabled",!0);break;case"active_elsewhere":$feedback.find(".wcpt-response-active-elsewhere").removeClass("wcpt-hide");break;case"invalid_key":$feedback.find(".wcpt-response-invalid-key").removeClass("wcpt-hide");break;default:$feedback.find(".wcpt-response-invalid-response").removeClass("wcpt-hide")}"activated"==data?$status.val("active"):$status.val("inactive"),$status.trigger("change")}}):alert("Please enter the valid 32 character license key received in your purchase email.")})),window.location.hash&&"pro_license"==window.location.hash.substr(1)&&$('[wcpt-model-key="pro_license"]').addClass("wcpt-open");var $shortcode_ops=$(".wcpt-shortcode-info"),$pro_op_row=$("tr",$shortcode_ops).filter((function(){var $this;return $(this).find(".wcpt-pro-badge").length})),$pro_msg_row=$('<tr><td colspan="2">Following are all <span class="wcpt-pro-badge">PRO</span> version options:</td></tr>');$pro_op_row.length&&($("td",$pro_msg_row).css({"font-size":"22px","font-weight":"bold","text-transform":"capitalize",padding:"40px 10px"}),$.merge($pro_msg_row,$pro_op_row).appendTo("tbody",$shortcode_ops))}));