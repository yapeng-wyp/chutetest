"use strict";function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n,a=!0,l=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){l=!0,n=e},f:function(){try{a||null==o.return||o.return()}finally{if(l)throw n}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}(function(i,e){var c=i.i18n.__,t=i.element,s=t.Fragment,r=t.createElement,u=t.RawHTML,f=i.blockEditor.InspectorControls,o=i.components,d=o.Placeholder,b=o.Icon,p=e.ProductTableColumns,m=e.ProductSelection,v=e.SettingsPanel,y=r,g=y("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24"},i.element.createElement("path",{d:"M4,21h15.893c1.103,0,2-0.897,2-2V7V5v0l0,0c0-1.103-0.897-2-2-2H4C2.897,3,2,3.897,2,5v14C2,20.103,2.897,21,4,21z M4,19 v-5h4v5H4z M14,7v5h-4V7H14z M8,7v5H4V7H8z M10,19v-5h4v5H10z M16,19v-5h3.894v5H16z M19.893,12H16V7h3.893V12z"})),n=c("Display a searchable table listing any or all of your products.","block-for-woo-product-table");"undefined"!=typeof wcptbInvalid&&(n=[n," ",y("strong",{},c("Warning! This block is an add-on for the WooCommerce Product Table plugin, which is not currently installed. Please sign up for a free trial and install the plugin before continuing.","block-for-woo-product-table"))]),i.blocks.registerBlockType("barn2/wc-product-table",{title:c("WooCommerce Product Table","block-for-woo-product-table"),description:n,icon:g,category:"woocommerce",attributes:{columns:{type:"array",default:[]},filters:{type:"array",default:[]},settings:{type:"array",default:[]},preview:{type:"boolean",default:!1}},supports:{customClassName:!1,className:!1,html:!1,align:["wide","full"]},example:{attributes:{preview:!0}},edit:function(e){var t=e.attributes,r=e.setAttributes;if(t.preview)return y(s,{},y("img",{src:wcptbPreviewImage}));var o,n=i.element.createRef();if("undefined"!=typeof wcptbInvalid){var a,l=wcptbInvalid.message.split("%s");a=1<l.length?[l[0],y("a",{href:wcptbInvalid.link,target:"_blank"},wcptbInvalid.link_text),l[1]]:l[0],o=y(d,{icon:g,label:"Product Table",instructions:a})}else o=y(s,null,[y(f,null,[y(v,{onChange:function(e){r({settings:e})},attributes:t})]),y("div",{className:"components-placeholder barn2-wc-product-table-block"},[y("div",{className:"components-placeholder__label"},[y(b,{icon:g,alt:""}),c("Product Table","block-for-woo-product-table")]),y("div",{className:"components-placeholder__fieldset"},[y("span",{className:"block-description"},[c("Lists products in a table view using the WooCommerce Product Table plugin. ","block-for-woo-product-table"),y("a",{href:"https://barn2.co.uk/kb/woocommerce-product-table-gutenberg/",target:"_blank"},c("Documentation","block-for-woo-product-table"))]),y("div",{className:"barn2-wc-product-table-block__options"},[y(p,{columns:t.columns,saveColumns:function(e){r({columns:e})}}),y(m,{attributes:t,saveFilters:function(e){r({filters:e})},ref:n})])],y("p",{className:"additional-settings-notice"},c("You can configure additional settings in the 'Block' tab in the sidebar.","block-for-woo-product-table")))])]);return o},save:function(e){var t="",r=e.attributes;if(r){if(r.columns&&r.columns.length&&(t+=' columns="'+r.columns.join(",")+'"'),r.filters&&r.filters.length){var o,n=_createForOfIteratorHelper(r.filters);try{for(n.s();!(o=n.n()).done;){var a=o.value;t+=" ".concat(a.key,'="').concat(a.value,'"')}}catch(e){n.e(e)}finally{n.f()}}if(r.settings&&r.settings.length){var l,i=_createForOfIteratorHelper(r.settings);try{for(i.s();!(l=i.n()).done;){var c=l.value;if(""!==c.value)if("additional"===c.key)t="".concat(c.value," ")+t;else if("customFilters"!==c.key){if("filters"===c.key&&"custom"===c.value)continue;t+=" ".concat(c.key,'="').concat(c.value,'"')}else t+=' filters="'.concat(c.value,'"')}}catch(e){i.e(e)}finally{i.f()}}(t=t.trim()).length&&(t=" "+t)}return y(u,{},"[product_table".concat(t,"]"))}})})(window.wp,window.productTableBlockComponents);